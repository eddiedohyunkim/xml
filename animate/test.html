<html>
<style>html,body{margin:0; overflow:hidden;}</style>
<body></body>
<script type='text/javascript' src='js/xml-formatter.js'></script>
<script>
var formattedXml;
var width = window.innerWidth;
var height = window.innerHeight;
var doc = document.implementation.createDocument(', ', null);
create(function(){xmlWriter();});
function create(later) {
	var svg = doc.createElement('svg');
	svg.setAttribute('xmlns','http://www.w3.org/2000/svg');
	svg.setAttribute('version','1.0');
	svg.setAttribute('width',width);
	svg.setAttribute('height',height);
/*
<g id="R1" transform="translate(250 250)"> 
  <ellipse rx="100" ry="0" opacity=".3">

  	<animateTransform attributeName="transform" type="rotate" dur="7s" from="0" to="360" repeatCount="indefinite" />

  	<animate attributeName="cx" dur="8s" values="-20; 220; -20" repeatCount="indefinite" />

  	<animate attributeName="ry" dur="3s" values="10; 60; 10" repeatCount="indefinite" />

  </ellipse>
</g>
<use xlink:href="#R1" transform="rotate(72 390 150)" />
<use xlink:href="#R1" transform="rotate(144 390 150)" />
<use xlink:href="#R1" transform="rotate(216 390 150)" />
<use xlink:href="#R1" transform="rotate(288 390 150)" />
*/
	var g1 = doc.createElement('g');
	g1.setAttribute('id', 'R1');
	g1.setAttribute('transform', 'translate('+width/2+' '+height/2+')');

	var c = doc.createElement('ellipse');
	c.setAttribute('rx', height/4);
	c.setAttribute('ry', 0);
	g1.appendChild(c);

	var at = doc.createElement('animateTransform');
	at.setAttribute('attributeName', 'transform');
	at.setAttribute('type', 'rotate');
	at.setAttribute('dur', 3+'s');
	at.setAttribute('from', 0);
	at.setAttribute('to', 360);
	at.setAttribute('repeatCount','indefinite');
	c.appendChild(at);

	var a1 = doc.createElement('animate');
	a1.setAttribute('attributeName','cx');
	a1.setAttribute('dur', 3+'s');
	a1.setAttribute('values', 0+';'+0+';'+0);
	a1.setAttribute('repeatCount', 'indefinite');
	c.appendChild(a1);

	var a2 = doc.createElement('animate');
	a2.setAttribute('attributeName','ry');
	a2.setAttribute('dur', 3+'s');
	a2.setAttribute('values', 10+';'+100+';'+10);
	a2.setAttribute('repeatCount', 'indefinite');
	c.appendChild(a2);

	svg.appendChild(g1);

	// var use = doc.createElement('use');
	// use.setAttribute('xlink:href','#R1');
	// use.setAttribute('transform','rotate(50 200 50)');
	// svg.appendChild(use);
	doc.appendChild(svg);
 	later();

}

function changedom() {
	var cdom = document.querySelector('ellipse');
	// cdom.setAttribute('fill', 'hsl('+Math.floor(Math.random()*354)+',100%,50%)');

}
setInterval(function(){changedom()}, 10);

function xmlWriter(){
	var s = new XMLSerializer();
	var str = '<?xml version="1.0" encoding="UTF-8"?>' + s.serializeToString(doc);
	var format = require('xml-formatter');
	formattedXml = format(str);
	console.log(formattedXml);
	print();
}

function print (){
	var display = document.querySelector('body');
	display.innerHTML = formattedXml;
};
</script>
</html>